<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Recherche YouTube</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 700px; margin: 20px auto; }
    input { width: 70%; padding: 8px; }
    button { padding: 8px 12px; }
    .video { cursor: pointer; margin: 10px 0; display: flex; align-items: center; gap: 10px; }
    .video img { width: 120px; height: 90px; object-fit: cover; }
    #player iframe { margin-top: 20px; width: 100%; height: 360px; }
  </style>
</head>
<body>
  <h1>Recherche YouTube</h1>
  <input type="text" id="searchInput" placeholder="Tape ta recherche..." />
  <button onclick="searchYouTube()">Rechercher</button>

  <div id="results"></div>
  <div id="player"></div>

  <script>
    const apiKey = "AIzaSyBSa5xy9wUggzfOuTX8yx5FttkcBX8WTl4";

    function searchYouTube() {
      const query = document.getElementById("searchInput").value.trim();
      if (!query) return alert("Entre un mot-clé.");

      fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=5&q=${encodeURIComponent(query)}&key=${apiKey}`)
        .then(res => res.json())
        .then(data => {
          if (!data.items || data.items.length === 0) {
            document.getElementById("results").innerHTML = "Aucun résultat.";
            document.getElementById("player").innerHTML = "";
            return;
          }

          const results = document.getElementById("results");
          results.innerHTML = "";
          document.getElementById("player").innerHTML = "";

          data.items.forEach(item => {
            const videoId = item.id.videoId;
            const title = item.snippet.title;
            const thumbnail = item.snippet.thumbnails.default.url;

            const div = document.createElement("div");
            div.className = "video";
            div.innerHTML = `<img src="${thumbnail}" alt="Miniature"><span>${title}</span>`;
            div.onclick = () => {
              document.getElementById("player").innerHTML =
                `<iframe src="https://www.youtube.com/embed/${videoId}" frameborder="0" allowfullscreen></iframe>`;
              window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            };
            results.appendChild(div);
          });
        })
        .catch(() => {
          document.getElementById("results").innerHTML = "Erreur lors de la recherche.";
          document.getElementById("player").innerHTML = "";
        });
    }
  </script>
</body>
</html>
